### Ð¢ÐµÑÑ‚Ð¾Ð²Ð¾Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ðµ: Backend Ð´Ð»Ñ Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚-Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½Ð°  
**Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼Ñ‹Ðµ Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¸**: Flask, Docker, PostgreSQL, SQLAlchemy, Alembic, Celery, Redis, Gunicorn, Nginx  

---

### ðŸš€ Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÐº  
1. Ð¡ÐºÐ»Ð¾Ð½Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹:  
   ```bash  
   git clone https://github.com/white-shark-code/for_HR.git
   cd Noxer  
   ```  
2. ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ `.env.example` Ð¸ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚Ðµ ÐµÐ³Ð¾ Ð¿Ð¾Ð´ ÑÐµÐ±Ñ
   ```bash  
   cp .env.example .env
   vim .env
   ```  
2. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ:  
   ```bash  
   docker-compose up -d
   ```  
3. ÐŸÑ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾:  
   - **URL**: `http://localhost:5555/info`

---

### âš™ï¸ ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ  
ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ñ‡ÐµÑ€ÐµÐ· Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ (Ñ„Ð°Ð¹Ð» `.env`):  
```ini  
# Type database
DB_TYPE = "postgresql" # "sqlite" "mysql" "mariadb"

# Connection string
DB_PATH = "user:password@localhost:5432/dbname"
# Example for sqlite
# DB_PATH = "/./test.db"
# Example for MySQL/MariaDB
# DB_PATH = "user:password@localhost:3306/dbname"
# PostgreSQL (example for asyncpg driver)

# Every count hours task schedule
UPDATE_HOURS = 2

REDIS_URL = 'redis://localhost:6379/0'
```  

---

### ðŸ—ƒï¸ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…
**ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹**:

- **products**: Ð¢Ð¾Ð²Ð°Ñ€Ñ‹ (`id`, `name`, `on_main`, `created_at`, `updated_at`)  
- **categories**: ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ (`id`, `name`, `image_url`, `sort_order`)  
- **tags**: Ð¢ÐµÐ³Ð¸ (`id`, `name` ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹)  
- **product_marks**: ÐœÐµÑ‚ÐºÐ¸ Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð² (`id`, `name`)  
- **images**: Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ (`id`, `image_url`, `main_image`, `title`, `product_id`)  
- **parameters**: ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ (`id`, `price`, `old_price`, `name`, `parameter_string`, `product_id`)  
- **colors**: Ð¦Ð²ÐµÑ‚Ð° (`id`, `name`, `code`, `image_url`, `product_id`)  
- **reviews**: ÐžÑ‚Ð·Ñ‹Ð²Ñ‹ (`id`, `image_url`, `product_id`)  

**ÐÑÑÐ¾Ñ†Ð¸Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹**:  
- **product_category_association**: Ð¡Ð²ÑÐ·ÑŒ Ñ‚Ð¾Ð²Ð°Ñ€-ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ (`product_id`, `category_id`)  
- **product_tag_association**: Ð¡Ð²ÑÐ·ÑŒ Ñ‚Ð¾Ð²Ð°Ñ€-Ñ‚ÐµÐ³ (`product_id`, `tag_id`)  
- **product_mark_association**: Ð¡Ð²ÑÐ·ÑŒ Ñ‚Ð¾Ð²Ð°Ñ€-Ð¼ÐµÑ‚ÐºÐ° (`product_id`, `mark_id`)  

**Ð¡Ð¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹**:  
- **extras**: Ð”Ð¾Ð¿. Ñ…Ð°Ñ€Ð°ÐºÑ‚ÐµÑ€Ð¸ÑÑ‚Ð¸ÐºÐ¸ (`id`, `characteristics`, `delivery`, `product_id`)  
- **excluded_items**: Ð˜ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ (`id`, `color_id`, `parameter_id`, `product_id`)  

---

### ðŸ”— ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ ÑÐ²ÑÐ·Ð¸
| ÐžÑ‚Ð½Ð¾ÑˆÐµÐ½Ð¸Ðµ                | Ð¢Ð¸Ð¿           | ÐšÐ°ÑÐºÐ°Ð´Ð½Ð¾Ðµ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ               |
|--------------------------|---------------|----------------------------------|
| Ð¢Ð¾Ð²Ð°Ñ€ â†’ Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ      | ÐžÐ´Ð¸Ð½-ÐºÐ¾-Ð¼Ð½Ð¾Ð³Ð¸Ð¼ | âœ… (ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¹)         |
| Ð¢Ð¾Ð²Ð°Ñ€ â†’ ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸        | ÐœÐ½Ð¾Ð³Ð¸Ðµ-ÐºÐ¾-Ð¼Ð½Ð¾Ð³Ð¸Ð¼ | âŒ (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ€Ð°Ð·Ñ€Ñ‹Ð² ÑÐ²ÑÐ·Ð¸)          |
| Ð¢Ð¾Ð²Ð°Ñ€ â†’ ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹        | ÐžÐ´Ð¸Ð½-ÐºÐ¾-Ð¼Ð½Ð¾Ð³Ð¸Ð¼ | âœ… (ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¾Ð²)          |
| ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ â†’ Ð¢Ð¾Ð²Ð°Ñ€Ñ‹       | ÐœÐ½Ð¾Ð³Ð¸Ðµ-ÐºÐ¾-Ð¼Ð½Ð¾Ð³Ð¸Ð¼ | âŒ (ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ÑÑ)        |

---

### âš ï¸ ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸
1. **ÐŸÑ€Ð¸ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ð¸ Ñ‚Ð¾Ð²Ð°Ñ€Ð°**:
   - ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑƒÐ´Ð°Ð»ÑÑŽÑ‚ÑÑ Ð²ÑÐµ ÐµÐ³Ð¾ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ñ‹Ðµ ÑÑƒÑ‰Ð½Ð¾ÑÑ‚Ð¸ (Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ, Ñ†Ð²ÐµÑ‚Ð°, Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹)
   - ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸/Ñ‚ÐµÐ³Ð¸/Ð¼ÐµÑ‚ÐºÐ¸ Ð¾ÑÑ‚Ð°ÑŽÑ‚ÑÑ Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ
   - Ð¡Ð²ÑÐ·Ð¸ Ð² Ð°ÑÑÐ¾Ñ†Ð¸Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ñ… Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð°Ñ… ÑƒÐ´Ð°Ð»ÑÑŽÑ‚ÑÑ

2. **Ð£Ð½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ðµ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ**:
   ```python
   # Ð¢ÐµÐ³Ð¸
   name = Column(String(100), unique=True)  # "Ð½Ð¾Ð²Ð¸Ð½ÐºÐ°", "Ð°ÐºÑ†Ð¸Ñ"
   
   # ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸
   name = Column(String(100), unique=True)  # "Ð­Ð»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð¸ÐºÐ°", "ÐžÐ´ÐµÐ¶Ð´Ð°"
   ```

---

### ðŸ› ï¸ ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸  
#### 1. ÐŸÐµÑ€Ð¸Ð¾Ð´Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ…  
- **Ð˜ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¸**:  
  ```python  
  API_URLS = [  
      "https://bot-igor.ru/api/products?on_main=true",  
      "https://bot-igor.ru/api/products?on_main=false"  
  ]  
  ```  
- **Ð—Ð°Ð´Ð°Ñ‡Ð° Celery**: ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ°Ð¶Ð´Ñ‹Ðµ `CELERY_BEAT_SCHEDULE` ÑÐµÐºÑƒÐ½Ð´.  
- **Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ**: Ð’ÑÐµ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ñ„Ð¸ÐºÑÐ¸Ñ€ÑƒÑŽÑ‚ÑÑ Ð² `logs/app.log`.  

#### 2. ÐœÐ°Ñ€ÑˆÑ€ÑƒÑ‚ `/info`  
Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ ÑÐ²Ð¾Ð´ÐºÑƒ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð² Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð»ÑŒÐ½Ð¾Ð¼ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ

**Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð¸ Ð¿Ð°Ð³Ð¸Ð½Ð°Ñ†Ð¸Ñ**:  
- `http://localhost:5555/info?category=Ð¢ÐµÑ…Ð½Ð¸ÐºÐ°`
- `http://localhost:5555/info?category=Ð¢ÐµÑ…Ð½Ð¸ÐºÐ°&category=Ð£Ñ‡ÐµÐ±Ð½Ð¸ÐºÐ¸`
- `http://localhost:5555/info?tags=1`
- `http://localhost:5555/info?tags=2&tags=5`
- `http://localhost:5555/info?page=1&count=200`

---

### ðŸ“„ Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ñ Ð¿Ð¾ ÑÐºÑÐ¿Ð»ÑƒÐ°Ñ‚Ð°Ñ†Ð¸Ð¸  
#### Ð—Ð°Ð¿ÑƒÑÐº Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ:  
```bash  
# Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð‘Ð”  
alembic upgrade head  

# Ð—Ð°Ð¿ÑƒÑÐº Flask  
gunicorn -w 4 -b 0.0.0.0:5555 app:app  

# Ð—Ð°Ð¿ÑƒÑÐº Celery  
celery -A tasks.celery worker --loglevel=info --beat  
```  
### ðŸ’¾ Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸  
1. **ÐŸÐ¾ÑÐ»Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ°**:  
   - ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ† (Alembic Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸).  
   - Ð—Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ð‘Ð” Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸ Ð¸Ð· API(Celery + Celery Beat).  
2. **Ð›Ð¾Ð³Ð¸**:  
   Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° loguru, Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð° Ð´Ð»Ñ Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð² Ñ„Ð°Ð¹Ð» Ð»Ð¾Ð³Ð¾Ð²

---

> ÐŸÑ€Ð¾ÐµÐºÑ‚ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½. Ð“Ð¾Ñ‚Ð¾Ð² Ðº Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐµ! âœ…